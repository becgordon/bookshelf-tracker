{% extends 'base.html' %}

{% block title %}Showing results for {{ searchterm }}{% endblock %}

{% block body %}

<a href="/userprofile/{{ session['user_name'] }}">Go back to profile.</a>

<form method="GET" action="/booksearchresults">
    <p>
        Search <input type="text" name="search-term">
        <input type="submit">
    </p>
</form>

<form method="GET" action="/booksearchresults">
    <p>
        Advanced Search: <input type="text" name="search-term" placeholder="search term">
        <select name="search-type" id="search-type-select">
            <option value="intitle">In Title</option>
            <option value="inauthor">In Author</option>
            <option value="subject">Subject</option>
            <option value="publisher">Publisher</option>
        </select>
        <input type="text" name="advanced-search-term" placeholder="search by">
        <input type="submit">
    </p>
</form>

{% if books == [] %}
<h2>Hmmm, it looks like there weren't any results for that search term. Please try again.</h2>
{% endif %}

{% for book in books %}
    
<h2>{{ book['volumeInfo']['title'] }}</h2>

{% if 'authors' in book['volumeInfo'] %}
<p> {{ book['volumeInfo']['authors']|join(' ') }}</p>
{% endif %}

{% if 'imageLinks' in book['volumeInfo'] %}
<p>
    <a href="/bookprofile/{{ book['id'] }}">
    <img src="{{ book['volumeInfo']['imageLinks']['thumbnail'] }}">
    </a>
</p>
{% endif %}
<p>--------------------------------------------------</p>
{% endfor %}

{% endblock %}